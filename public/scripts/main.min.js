"use strict";function _typeof(obj) {"@babel/helpers - typeof";return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {return typeof obj;} : function (obj) {return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;}, _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);Object.defineProperty(Constructor, "prototype", { writable: false });return Constructor;}function _toPropertyKey(arg) {var key = _toPrimitive(arg, "string");return _typeof(key) === "symbol" ? key : String(key);}function _toPrimitive(input, hint) {if (_typeof(input) !== "object" || input === null) return input;var prim = input[Symbol.toPrimitive];if (prim !== undefined) {var res = prim.call(input, hint || "default");if (_typeof(res) !== "object") return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return (hint === "string" ? String : Number)(input);}var FormHandler = /*#__PURE__*/function () {

  function FormHandler() {_classCallCheck(this, FormHandler);
    this.init();
    this.handleDOM();
    this.handleEvents();
  }

  /**
   * Declare global variables
   */_createClass(FormHandler, [{ key: "init", value:
    function init() {

    }

    /**
     * Handle DOM queries
     */ }, { key: "handleDOM", value:
    function handleDOM() {
      this.form = $("#registerForm");
      this.phoneInput = $('#phone');
      this.storeInput = $("#store");
      this.receiptInput = $('#receiptNumber');
      this.dateInput = $('#date');
      this.rulesInput = $('#rule');
      this.termsInput = $('#terms');
      this.ageInput = $('#age');
      this.modal = $("#errorModal");
      this.errorDiv = $(".error-messages");
      this.receiptModal = $('#receiptModal');
      this.formWrapper = $(".form-wrapper");
      this.info = $(".info-wrapper");
      this.closeReceipt = $(".closeModal");
      this.closeReceiptBootstrap = $(".closeModalBootstrap");
      this.receiptModalBootstrap = $('#receiptModalBootstrap');
      this.closeModalForm = $(".close-modal");
      this.messageModal = $("#campaignModal");
      this.registerButton = $('.register-button');
    }

    /**
     * Listen for events
     */ }, { key: "handleEvents", value:
    function handleEvents() {
      var self = this;

      var imagesBon = [
      {
        name: 'auchan',
        image: "".concat(absolutePath, "/bonuri/Auchan.png")
      },
      {
        name: 'carrefour',
        image: "".concat(absolutePath, "/bonuri/Carrefour.png")
      }, {
        name: 'cora',
        image: "".concat(absolutePath, "/bonuri/Cora.png")
      },
      {
        name: 'kaufland',
        image: "".concat(absolutePath, "/bonuri/Kaufland.png")
      },
      {
        name: 'mega',
        image: "".concat(absolutePath, "/bonuri/Mega-Image.png")
      },
      {
        name: 'metro',
        image: "".concat(absolutePath, "/bonuri/Metro.png")
      },
      {
        name: 'penny',
        image: "".concat(absolutePath, "/bonuri/Penny.png")
      },
      {
        name: 'profi',
        image: "".concat(absolutePath, "/bonuri/Profi.png")
      },
      {
        name: 'selgros',
        image: "".concat(absolutePath, "/bonuri/Selgros.png")
      },
      {
        name: 'altele',
        image: "".concat(absolutePath, "/bonuri/Auchan.png")
      },
      {
        name: '',
        image: "".concat(absolutePath, "/bonuri/Auchan.png")
      }];


      this.info.on("click", function (e) {
        e.preventDefault();
        self.receiptModal.toggleClass("active");
      });

      this.closeModalForm.on("click", function (e) {
        e.preventDefault();
        self.messageModal.modal("hide");
      });

      this.closeReceipt.on("click", function (e) {
        e.preventDefault();
        self.receiptModal.toggleClass("active");
      });

      this.closeReceiptBootstrap.on("click", function (e) {
        e.preventDefault();
        self.receiptModalBootstrap.modal('hide');
      });

      /**
       * Add custom rules and validate the form
       */
      $.validator.addMethod("digitsonly", function (value, element) {
        return this.optional(element) || /^[0-9]+$/g.test(value);
      }, "");
      $.validator.addMethod("phoneRO", function (phone_number, element) {
        phone_number = phone_number.replace(/\(|\)|\s+|-/g, "");
        return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(?:(?:07\d{2}\S?\d{3}\S?\d{3}|(21|31)\d{1}\S?\d{3}\S?\d{3}|((2|3)[3-7]\d{1})\S?\d{3}\S?\d{3}|(8|9)0\d{1}\S?\d{3}\S?\d{3}))$/);
      }, "");
      $.validator.addMethod("recipeRegex", function (value, element) {
        return this.optional(element) || /^(?![\s-0]*$)\d{1,25}(?:[\s-]\d{1,25})*$/g.test(value);
      }, "");
      $.validator.addMethod("valueNotEquals", function (value, element, arg) {
        return arg !== value;
      }, "");

      // startDate 20 April
      // endDate 31 May
      var campaignMaxDate = null;
      var currentDate = Math.floor(Date.now() / 1000); // Current day
      var endCampaignDate = 1685566799;

      if (currentDate <= endCampaignDate) {
        campaignMaxDate = new Date();
      } else {
        campaignMaxDate = new Date(2023, 5 - 1, 31);
      }

      this.dateInput.datepicker({
        monthNames: ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'], // set month names
        monthNamesShort: ['Ian', 'Feb', 'Mar', 'Apr', 'Mai', 'Iun', 'Iul', 'Aug', 'Sep', 'Oct', 'Noi', 'Dec'], // set short month names
        dayNames: ['Duminică', 'Luni', 'Marți', 'Miercuri', 'Joi', 'Vineri', 'Sâmbată'], // set days names
        dayNamesShort: ['Dum', 'Lun', 'Mar', 'Mie', 'Joi', 'Vin', 'Sâb'], // set short day names
        dayNamesMin: ['Du', 'Lu', 'Ma', 'Mi', 'Jo', 'Vi', 'Sâ'], // set more short days names
        dateFormat: 'dd/mm/yy',
        // TODO: LIVE
        minDate: new Date(2023, 4 - 1, 20),
        // TODO: STG
        // minDate: new Date(2023, 3 - 1, 1),
        maxDate: campaignMaxDate,
        orientation: 'bottom'
      });

      // console.log(new Date(2023, 4 - 1, 20));
      // console.log(new Date(2023, 5 - 1, 31));
      this.dateInput.on('change', function (e) {
        $(this).valid();
      });

      this.form.validate({
        rules: {
          phone: {
            digitsonly: true,
            required: true,
            minlength: 10,
            maxlength: 10,
            number: true,
            phoneRO: true
          },
          store: {
            required: true
          },
          receiptNumber: {
            required: true,
            maxlength: 25,
            recipeRegex: true,
            number: false,
            digitsonly: false,
            phoneRO: false
          },
          date: {
            required: true,
            number: false,
            digitsonly: false,
            phoneRO: false
          },
          rule: {
            required: true,
            number: false,
            digitsonly: false,
            phoneRO: false
          },
          terms: {
            required: true,
            number: false,
            digitsonly: false,
            phoneRO: false
          },
          age: {
            required: true,
            number: false,
            digitsonly: false,
            phoneRO: false
          }
        },
        messages: {
          phone: {
            digitsonly: 'Trebuie să introduci un număr de telefon valid.',
            required: 'Numărul de telefon este incomplet.',
            minlength: 'Numărul de telefon este incomplet.',
            maxlength: 'Trebuie să introduci un număr de telefon valid.',
            number: 'Trebuie să introduci un număr de telefon valid.',
            phoneRO: 'Trebuie să introduci un număr de telefon valid.'
          },
          store: {
            required: "Te rugăm să selectezi un magazin"
          },
          receiptNumber: {
            required: 'Trebuie să introduci un numar de bon valid.',
            maxlength: 'Trebuie să introduci un numar de bon valid.',
            recipeRegex: 'Trebuie să introduci un numar de bon valid.'
          },
          date: {
            required: 'Trebuie să introduci data bonului fiscal.'
          },
          rule: {
            required: 'Trebuie să bifezi că ai citit și că ești de acord cu Regulamentul campaniei.'
          },
          terms: {
            required: 'Trebuie să bifezi că ai citit și că ești de acord cu Termenii și condițiile.'
          },
          age: {
            required: 'Trebuie să bifezi că declari că ai peste 18 ani.'
          }
        },
        errorElement: 'div',
        errorPlacement: function errorPlacement(error, element) {
          error.appendTo(self.errorDiv);
        },
        submitHandler: function submitHandler(form, event) {
          event.preventDefault();
          /*ttq.track('SubmitForm');
          gtag_report_conversion();*/

          $.ajax({
            method: "POST",
            url: "/register-campaign",
            data: $("#registerForm").serialize(),
            cache: false,
            beforeSend: function beforeSend() {
              self.formWrapper.addClass("show-loader");
            },
            success: function success(response) {
              if (response.status) {
                self.resetForm();
                self.resetRecaptcha();
              }

              self.messageModal.find(".message__text").html(response.message);
              self.messageModal.modal('show');
            },
            complete: function complete() {
              self.formWrapper.removeClass("show-loader");
            },
            error: function error() {
              self.errorDiv.html('<p>A intervenit o eroare neprevăzută. Te rugăm să încerci din nou mai târziu.</p>');
            }
          });
        }
      });

      this.storeInput.on('change', function () {
        // On select change, switch image for receipt
        var bonImg = $('#receiptModal .receipt-bon');
        // let bonImgModal = $('#receiptModalBootstrap img');
        var option = $(this).val();

        for (var i = 0; i < imagesBon.length; i++) {
          if (option === imagesBon[i].name) {
            bonImg.attr('src', imagesBon[i].image);
            // bonImgModal.attr('src', imagesBon[i].image);
          }
        }
      });

      this.registerButton.on('click tap', function () {
        gtag_report_conversion();
      });

    }

    /**
     * Function of reseting form
     */ }, { key: "resetForm", value:
    function resetForm() {
      this.phoneInput.val('');
      this.storeInput.val('');
      this.receiptInput.val('');
      this.dateInput.val('');
      this.rulesInput.prop('checked', false);
      this.rulesInput.attr('checked', false);
      this.termsInput.prop('checked', false);
      this.termsInput.attr('checked', false);
      this.ageInput.prop('checked', false);
      this.ageInput.attr('checked', false);
    } }, { key: "resetRecaptcha", value:

    /**
     * Function of resetting recaptcha
     */
    function resetRecaptcha() {
      setTimeout(function () {
        // reset captcha
        grecaptcha.reset();
      }, 500);
    } }]);return FormHandler;}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRm9ybUhhbmRsZXIuanMiLCJuYW1lcyI6WyJGb3JtSGFuZGxlciIsIl9jbGFzc0NhbGxDaGVjayIsImluaXQiLCJoYW5kbGVET00iLCJoYW5kbGVFdmVudHMiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsImZvcm0iLCIkIiwicGhvbmVJbnB1dCIsInN0b3JlSW5wdXQiLCJyZWNlaXB0SW5wdXQiLCJkYXRlSW5wdXQiLCJydWxlc0lucHV0IiwidGVybXNJbnB1dCIsImFnZUlucHV0IiwibW9kYWwiLCJlcnJvckRpdiIsInJlY2VpcHRNb2RhbCIsImZvcm1XcmFwcGVyIiwiaW5mbyIsImNsb3NlUmVjZWlwdCIsImNsb3NlUmVjZWlwdEJvb3RzdHJhcCIsInJlY2VpcHRNb2RhbEJvb3RzdHJhcCIsImNsb3NlTW9kYWxGb3JtIiwibWVzc2FnZU1vZGFsIiwicmVnaXN0ZXJCdXR0b24iLCJzZWxmIiwiaW1hZ2VzQm9uIiwibmFtZSIsImltYWdlIiwiY29uY2F0IiwiYWJzb2x1dGVQYXRoIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGVDbGFzcyIsInZhbGlkYXRvciIsImFkZE1ldGhvZCIsImVsZW1lbnQiLCJvcHRpb25hbCIsInRlc3QiLCJwaG9uZV9udW1iZXIiLCJyZXBsYWNlIiwibGVuZ3RoIiwibWF0Y2giLCJhcmciLCJjYW1wYWlnbk1heERhdGUiLCJjdXJyZW50RGF0ZSIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJlbmRDYW1wYWlnbkRhdGUiLCJkYXRlcGlja2VyIiwibW9udGhOYW1lcyIsIm1vbnRoTmFtZXNTaG9ydCIsImRheU5hbWVzIiwiZGF5TmFtZXNTaG9ydCIsImRheU5hbWVzTWluIiwiZGF0ZUZvcm1hdCIsIm1pbkRhdGUiLCJtYXhEYXRlIiwib3JpZW50YXRpb24iLCJ2YWxpZCIsInZhbGlkYXRlIiwicnVsZXMiLCJwaG9uZSIsImRpZ2l0c29ubHkiLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsIm1heGxlbmd0aCIsIm51bWJlciIsInBob25lUk8iLCJzdG9yZSIsInJlY2VpcHROdW1iZXIiLCJyZWNpcGVSZWdleCIsImRhdGUiLCJydWxlIiwidGVybXMiLCJhZ2UiLCJtZXNzYWdlcyIsImVycm9yRWxlbWVudCIsImVycm9yUGxhY2VtZW50IiwiZXJyb3IiLCJhcHBlbmRUbyIsInN1Ym1pdEhhbmRsZXIiLCJldmVudCIsInR0cSIsInRyYWNrIiwiZ3RhZ19yZXBvcnRfY29udmVyc2lvbiIsImFqYXgiLCJtZXRob2QiLCJ1cmwiLCJkYXRhIiwic2VyaWFsaXplIiwiY2FjaGUiLCJiZWZvcmVTZW5kIiwiYWRkQ2xhc3MiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJyZXNldEZvcm0iLCJyZXNldFJlY2FwdGNoYSIsImZpbmQiLCJodG1sIiwibWVzc2FnZSIsImNvbXBsZXRlIiwicmVtb3ZlQ2xhc3MiLCJib25JbWciLCJvcHRpb24iLCJ2YWwiLCJpIiwiYXR0ciIsInByb3AiLCJzZXRUaW1lb3V0IiwiZ3JlY2FwdGNoYSIsInJlc2V0Il0sInNvdXJjZXMiOlsiRm9ybUhhbmRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybUhhbmRsZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlRE9NKCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlY2xhcmUgZ2xvYmFsIHZhcmlhYmxlc1xyXG4gICAgICovXHJcbiAgICBpbml0KCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSBET00gcXVlcmllc1xyXG4gICAgICovXHJcbiAgICBoYW5kbGVET00oKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtID0gJChcIiNyZWdpc3RlckZvcm1cIik7XHJcbiAgICAgICAgdGhpcy5waG9uZUlucHV0ID0gJCgnI3Bob25lJyk7XHJcbiAgICAgICAgdGhpcy5zdG9yZUlucHV0ID0gJChcIiNzdG9yZVwiKTtcclxuICAgICAgICB0aGlzLnJlY2VpcHRJbnB1dCA9ICQoJyNyZWNlaXB0TnVtYmVyJyk7XHJcbiAgICAgICAgdGhpcy5kYXRlSW5wdXQgPSAkKCcjZGF0ZScpO1xyXG4gICAgICAgIHRoaXMucnVsZXNJbnB1dCA9ICQoJyNydWxlJyk7XHJcbiAgICAgICAgdGhpcy50ZXJtc0lucHV0ID0gJCgnI3Rlcm1zJyk7XHJcbiAgICAgICAgdGhpcy5hZ2VJbnB1dCA9ICQoJyNhZ2UnKTtcclxuICAgICAgICB0aGlzLm1vZGFsID0gJChcIiNlcnJvck1vZGFsXCIpO1xyXG4gICAgICAgIHRoaXMuZXJyb3JEaXYgPSAkKFwiLmVycm9yLW1lc3NhZ2VzXCIpO1xyXG4gICAgICAgIHRoaXMucmVjZWlwdE1vZGFsID0gJCgnI3JlY2VpcHRNb2RhbCcpO1xyXG4gICAgICAgIHRoaXMuZm9ybVdyYXBwZXIgPSAkKFwiLmZvcm0td3JhcHBlclwiKTtcclxuICAgICAgICB0aGlzLmluZm8gPSAkKFwiLmluZm8td3JhcHBlclwiKTtcclxuICAgICAgICB0aGlzLmNsb3NlUmVjZWlwdCA9ICQoXCIuY2xvc2VNb2RhbFwiKTtcclxuICAgICAgICB0aGlzLmNsb3NlUmVjZWlwdEJvb3RzdHJhcCA9ICQoXCIuY2xvc2VNb2RhbEJvb3RzdHJhcFwiKTtcclxuICAgICAgICB0aGlzLnJlY2VpcHRNb2RhbEJvb3RzdHJhcCA9ICQoJyNyZWNlaXB0TW9kYWxCb290c3RyYXAnKTtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxGb3JtID0gJChcIi5jbG9zZS1tb2RhbFwiKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VNb2RhbCA9ICQoXCIjY2FtcGFpZ25Nb2RhbFwiKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uID0gJCgnLnJlZ2lzdGVyLWJ1dHRvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGlzdGVuIGZvciBldmVudHNcclxuICAgICAqL1xyXG4gICAgaGFuZGxlRXZlbnRzKCkge1xyXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgbGV0IGltYWdlc0JvbiA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2F1Y2hhbicsXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogYCR7YWJzb2x1dGVQYXRofS9ib251cmkvQXVjaGFuLnBuZ2AsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdjYXJyZWZvdXInLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGAke2Fic29sdXRlUGF0aH0vYm9udXJpL0NhcnJlZm91ci5wbmdgLFxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnY29yYScsXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogYCR7YWJzb2x1dGVQYXRofS9ib251cmkvQ29yYS5wbmdgLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAna2F1ZmxhbmQnLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGAke2Fic29sdXRlUGF0aH0vYm9udXJpL0thdWZsYW5kLnBuZ2AsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdtZWdhJyxcclxuICAgICAgICAgICAgICAgIGltYWdlOiBgJHthYnNvbHV0ZVBhdGh9L2JvbnVyaS9NZWdhLUltYWdlLnBuZ2AsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdtZXRybycsXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogYCR7YWJzb2x1dGVQYXRofS9ib251cmkvTWV0cm8ucG5nYCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3Blbm55JyxcclxuICAgICAgICAgICAgICAgIGltYWdlOiBgJHthYnNvbHV0ZVBhdGh9L2JvbnVyaS9QZW5ueS5wbmdgLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAncHJvZmknLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGAke2Fic29sdXRlUGF0aH0vYm9udXJpL1Byb2ZpLnBuZ2AsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdzZWxncm9zJyxcclxuICAgICAgICAgICAgICAgIGltYWdlOiBgJHthYnNvbHV0ZVBhdGh9L2JvbnVyaS9TZWxncm9zLnBuZ2AsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdhbHRlbGUnLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGAke2Fic29sdXRlUGF0aH0vYm9udXJpL0F1Y2hhbi5wbmdgLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIGltYWdlOiBgJHthYnNvbHV0ZVBhdGh9L2JvbnVyaS9BdWNoYW4ucG5nYCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMuaW5mby5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5yZWNlaXB0TW9kYWwudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2xvc2VNb2RhbEZvcm0ub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHNlbGYubWVzc2FnZU1vZGFsLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jbG9zZVJlY2VpcHQub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHNlbGYucmVjZWlwdE1vZGFsLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNsb3NlUmVjZWlwdEJvb3RzdHJhcC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5yZWNlaXB0TW9kYWxCb290c3RyYXAubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIGN1c3RvbSBydWxlcyBhbmQgdmFsaWRhdGUgdGhlIGZvcm1cclxuICAgICAgICAgKi9cclxuICAgICAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJkaWdpdHNvbmx5XCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCAvXlswLTldKyQvZy50ZXN0KHZhbHVlKTtcclxuICAgICAgICB9LCBcIlwiKTtcclxuICAgICAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJwaG9uZVJPXCIsIGZ1bmN0aW9uIChwaG9uZV9udW1iZXIsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcGhvbmVfbnVtYmVyID0gcGhvbmVfbnVtYmVyLnJlcGxhY2UoL1xcKHxcXCl8XFxzK3wtL2csIFwiXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCBwaG9uZV9udW1iZXIubGVuZ3RoID4gOSAmJlxyXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyLm1hdGNoKC9eKD86KD86MDdcXGR7Mn1cXFM/XFxkezN9XFxTP1xcZHszfXwoMjF8MzEpXFxkezF9XFxTP1xcZHszfVxcUz9cXGR7M318KCgyfDMpWzMtN11cXGR7MX0pXFxTP1xcZHszfVxcUz9cXGR7M318KDh8OSkwXFxkezF9XFxTP1xcZHszfVxcUz9cXGR7M30pKSQvKTtcclxuICAgICAgICB9LCBcIlwiKTtcclxuICAgICAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJyZWNpcGVSZWdleFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgL14oPyFbXFxzLTBdKiQpXFxkezEsMjV9KD86W1xccy1dXFxkezEsMjV9KSokL2cudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgfSwgXCJcIik7XHJcbiAgICAgICAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwidmFsdWVOb3RFcXVhbHNcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBhcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZyAhPT0gdmFsdWU7XHJcbiAgICAgICAgfSwgXCJcIik7XHJcblxyXG4gICAgICAgIC8vIHN0YXJ0RGF0ZSAyMCBBcHJpbFxyXG4gICAgICAgIC8vIGVuZERhdGUgMzEgTWF5XHJcbiAgICAgICAgbGV0IGNhbXBhaWduTWF4RGF0ZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IGN1cnJlbnREYXRlID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7IC8vIEN1cnJlbnQgZGF5XHJcbiAgICAgICAgbGV0IGVuZENhbXBhaWduRGF0ZSA9IDE2ODU1NjY3OTk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50RGF0ZSA8PSBlbmRDYW1wYWlnbkRhdGUpIHtcclxuICAgICAgICAgICAgY2FtcGFpZ25NYXhEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYW1wYWlnbk1heERhdGUgPSBuZXcgRGF0ZSgyMDIzLCA1IC0gMSwgMzEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kYXRlSW5wdXQuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgICAgIG1vbnRoTmFtZXM6IFsnSWFudWFyaWUnLCAnRmVicnVhcmllJywgJ01hcnRpZScsICdBcHJpbGllJywgJ01haScsICdJdW5pZScsICdJdWxpZScsICdBdWd1c3QnLCAnU2VwdGVtYnJpZScsICdPY3RvbWJyaWUnLCAnTm9pZW1icmllJywgJ0RlY2VtYnJpZSddLCAvLyBzZXQgbW9udGggbmFtZXNcclxuICAgICAgICAgICAgbW9udGhOYW1lc1Nob3J0OiBbJ0lhbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYWknLCAnSXVuJywgJ0l1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb2knLCAnRGVjJ10sIC8vIHNldCBzaG9ydCBtb250aCBuYW1lc1xyXG4gICAgICAgICAgICBkYXlOYW1lczogWydEdW1pbmljxIMnLCAnTHVuaScsICdNYXLIm2knLCAnTWllcmN1cmknLCAnSm9pJywgJ1ZpbmVyaScsICdTw6JtYmF0xIMnXSwgLy8gc2V0IGRheXMgbmFtZXNcclxuICAgICAgICAgICAgZGF5TmFtZXNTaG9ydDogWydEdW0nLCAnTHVuJywgJ01hcicsICdNaWUnLCAnSm9pJywgJ1ZpbicsICdTw6JiJ10sIC8vIHNldCBzaG9ydCBkYXkgbmFtZXNcclxuICAgICAgICAgICAgZGF5TmFtZXNNaW46IFsnRHUnLCAnTHUnLCAnTWEnLCAnTWknLCAnSm8nLCAnVmknLCAnU8OiJ10sIC8vIHNldCBtb3JlIHNob3J0IGRheXMgbmFtZXNcclxuICAgICAgICAgICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcclxuICAgICAgICAgICAgLy8gVE9ETzogTElWRVxyXG4gICAgICAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgyMDIzLCA0IC0gMSwgMjApLFxyXG4gICAgICAgICAgICAvLyBUT0RPOiBTVEdcclxuICAgICAgICAgICAgLy8gbWluRGF0ZTogbmV3IERhdGUoMjAyMywgMyAtIDEsIDEpLFxyXG4gICAgICAgICAgICBtYXhEYXRlOiBjYW1wYWlnbk1heERhdGUsXHJcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnYm90dG9tJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXcgRGF0ZSgyMDIzLCA0IC0gMSwgMjApKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXcgRGF0ZSgyMDIzLCA1IC0gMSwgMzEpKTtcclxuICAgICAgICB0aGlzLmRhdGVJbnB1dC5vbignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWxpZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmZvcm0udmFsaWRhdGUoe1xyXG4gICAgICAgICAgICBydWxlczoge1xyXG4gICAgICAgICAgICAgICAgcGhvbmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBkaWdpdHNvbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVSTzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN0b3JlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0TnVtYmVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAyNSxcclxuICAgICAgICAgICAgICAgICAgICByZWNpcGVSZWdleDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpZ2l0c29ubHk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lUk86IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG51bWJlcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlnaXRzb25seTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVSTzogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBydWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBkaWdpdHNvbmx5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZVJPOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlcm1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBkaWdpdHNvbmx5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZVJPOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG51bWJlcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlnaXRzb25seTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVSTzogZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWVzc2FnZXM6IHtcclxuICAgICAgICAgICAgICAgIHBob25lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlnaXRzb25seTogJ1RyZWJ1aWUgc8SDIGludHJvZHVjaSB1biBudW3Eg3IgZGUgdGVsZWZvbiB2YWxpZC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiAnTnVtxINydWwgZGUgdGVsZWZvbiBlc3RlIGluY29tcGxldC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogJ051bcSDcnVsIGRlIHRlbGVmb24gZXN0ZSBpbmNvbXBsZXQuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhsZW5ndGg6ICdUcmVidWllIHPEgyBpbnRyb2R1Y2kgdW4gbnVtxINyIGRlIHRlbGVmb24gdmFsaWQuJyxcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6ICdUcmVidWllIHPEgyBpbnRyb2R1Y2kgdW4gbnVtxINyIGRlIHRlbGVmb24gdmFsaWQuJyxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZVJPOiAnVHJlYnVpZSBzxIMgaW50cm9kdWNpIHVuIG51bcSDciBkZSB0ZWxlZm9uIHZhbGlkLicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3RvcmU6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJUZSBydWfEg20gc8SDIHNlbGVjdGV6aSB1biBtYWdhemluXCIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdE51bWJlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiAnVHJlYnVpZSBzxIMgaW50cm9kdWNpIHVuIG51bWFyIGRlIGJvbiB2YWxpZC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aDogJ1RyZWJ1aWUgc8SDIGludHJvZHVjaSB1biBudW1hciBkZSBib24gdmFsaWQuJyxcclxuICAgICAgICAgICAgICAgICAgICByZWNpcGVSZWdleDogJ1RyZWJ1aWUgc8SDIGludHJvZHVjaSB1biBudW1hciBkZSBib24gdmFsaWQuJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICdUcmVidWllIHPEgyBpbnRyb2R1Y2kgZGF0YSBib251bHVpIGZpc2NhbC4nLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJ1bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogJ1RyZWJ1aWUgc8SDIGJpZmV6aSBjxIMgYWkgY2l0aXQgyJlpIGPEgyBlyJl0aSBkZSBhY29yZCBjdSBSZWd1bGFtZW50dWwgY2FtcGFuaWVpLicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVybXM6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogJ1RyZWJ1aWUgc8SDIGJpZmV6aSBjxIMgYWkgY2l0aXQgyJlpIGPEgyBlyJl0aSBkZSBhY29yZCBjdSBUZXJtZW5paSDImWkgY29uZGnIm2lpbGUuJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogJ1RyZWJ1aWUgc8SDIGJpZmV6aSBjxIMgZGVjbGFyaSBjxIMgYWkgcGVzdGUgMTggYW5pLicsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yRWxlbWVudDogJ2RpdicsXHJcbiAgICAgICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiAoZXJyb3IsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yLmFwcGVuZFRvKHNlbGYuZXJyb3JEaXYpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbiAoZm9ybSwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0dHEudHJhY2soJ1N1Ym1pdEZvcm0nKTtcclxuICAgICAgICAgICAgICAgIGd0YWdfcmVwb3J0X2NvbnZlcnNpb24oKTtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL3JlZ2lzdGVyLWNhbXBhaWduXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogJChcIiNyZWdpc3RlckZvcm1cIikuc2VyaWFsaXplKCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mb3JtV3JhcHBlci5hZGRDbGFzcyhcInNob3ctbG9hZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVzZXRGb3JtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc2V0UmVjYXB0Y2hhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWVzc2FnZU1vZGFsLmZpbmQoXCIubWVzc2FnZV9fdGV4dFwiKS5odG1sKHJlc3BvbnNlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1lc3NhZ2VNb2RhbC5tb2RhbCgnc2hvdycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mb3JtV3JhcHBlci5yZW1vdmVDbGFzcyhcInNob3ctbG9hZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvckRpdi5odG1sKCc8cD5BIGludGVydmVuaXQgbyBlcm9hcmUgbmVwcmV2xIN6dXTEgy4gVGUgcnVnxINtIHPEgyDDrm5jZXJjaSBkaW4gbm91IG1haSB0w6Jyeml1LjwvcD4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JlSW5wdXQub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gT24gc2VsZWN0IGNoYW5nZSwgc3dpdGNoIGltYWdlIGZvciByZWNlaXB0XHJcbiAgICAgICAgICAgIGxldCBib25JbWcgPSAkKCcjcmVjZWlwdE1vZGFsIC5yZWNlaXB0LWJvbicpO1xyXG4gICAgICAgICAgICAvLyBsZXQgYm9uSW1nTW9kYWwgPSAkKCcjcmVjZWlwdE1vZGFsQm9vdHN0cmFwIGltZycpO1xyXG4gICAgICAgICAgICBsZXQgb3B0aW9uID0gJCh0aGlzKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VzQm9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uID09PSBpbWFnZXNCb25baV0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvbkltZy5hdHRyKCdzcmMnLCBpbWFnZXNCb25baV0uaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJvbkltZ01vZGFsLmF0dHIoJ3NyYycsIGltYWdlc0JvbltpXS5pbWFnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbi5vbignY2xpY2sgdGFwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBndGFnX3JlcG9ydF9jb252ZXJzaW9uKCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbiBvZiByZXNldGluZyBmb3JtXHJcbiAgICAgKi9cclxuICAgIHJlc2V0Rm9ybSgpIHtcclxuICAgICAgICB0aGlzLnBob25lSW5wdXQudmFsKCcnKTtcclxuICAgICAgICB0aGlzLnN0b3JlSW5wdXQudmFsKCcnKTtcclxuICAgICAgICB0aGlzLnJlY2VpcHRJbnB1dC52YWwoJycpO1xyXG4gICAgICAgIHRoaXMuZGF0ZUlucHV0LnZhbCgnJyk7XHJcbiAgICAgICAgdGhpcy5ydWxlc0lucHV0LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5ydWxlc0lucHV0LmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50ZXJtc0lucHV0LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50ZXJtc0lucHV0LmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5hZ2VJbnB1dC5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuYWdlSW5wdXQuYXR0cignY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbiBvZiByZXNldHRpbmcgcmVjYXB0Y2hhXHJcbiAgICAgKi9cclxuICAgIHJlc2V0UmVjYXB0Y2hhKCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyByZXNldCBjYXB0Y2hhXHJcbiAgICAgICAgICAgIGdyZWNhcHRjaGEucmVzZXQoKTtcclxuICAgICAgICB9LCA1MDApXHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiMGpEQUFNQSxXQUFXOztFQUViLFNBQUFBLFlBQUEsRUFBYyxDQUFBQyxlQUFBLE9BQUFELFdBQUE7SUFDVixJQUFJLENBQUNFLElBQUksQ0FBQyxDQUFDO0lBQ1gsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUNoQixJQUFJLENBQUNDLFlBQVksQ0FBQyxDQUFDO0VBQ3ZCOztFQUVBO0FBQ0o7QUFDQSxLQUZJQyxZQUFBLENBQUFMLFdBQUEsS0FBQU0sR0FBQSxVQUFBQyxLQUFBO0lBR0EsU0FBQUwsS0FBQSxFQUFPOztJQUVQOztJQUVBO0FBQ0o7QUFDQSxPQUZJLE1BQUFJLEdBQUEsZUFBQUMsS0FBQTtJQUdBLFNBQUFKLFVBQUEsRUFBWTtNQUNSLElBQUksQ0FBQ0ssSUFBSSxHQUFHQyxDQUFDLENBQUMsZUFBZSxDQUFDO01BQzlCLElBQUksQ0FBQ0MsVUFBVSxHQUFHRCxDQUFDLENBQUMsUUFBUSxDQUFDO01BQzdCLElBQUksQ0FBQ0UsVUFBVSxHQUFHRixDQUFDLENBQUMsUUFBUSxDQUFDO01BQzdCLElBQUksQ0FBQ0csWUFBWSxHQUFHSCxDQUFDLENBQUMsZ0JBQWdCLENBQUM7TUFDdkMsSUFBSSxDQUFDSSxTQUFTLEdBQUdKLENBQUMsQ0FBQyxPQUFPLENBQUM7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

"use strict";function _typeof(obj) {"@babel/helpers - typeof";return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {return typeof obj;} : function (obj) {return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;}, _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);Object.defineProperty(Constructor, "prototype", { writable: false });return Constructor;}function _toPropertyKey(arg) {var key = _toPrimitive(arg, "string");return _typeof(key) === "symbol" ? key : String(key);}function _toPrimitive(input, hint) {if (_typeof(input) !== "object" || input === null) return input;var prim = input[Symbol.toPrimitive];if (prim !== undefined) {var res = prim.call(input, hint || "default");if (_typeof(res) !== "object") return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return (hint === "string" ? String : Number)(input);}var LayoutHandler = /*#__PURE__*/function () {

  function LayoutHandler() {_classCallCheck(this, LayoutHandler);
    this.init();
    this.handleDOM();
    this.handleEvents();
  }

  /**
   * Declare global variables
   */_createClass(LayoutHandler, [{ key: "init", value:
    function init() {
    }

    /**
     * Handle DOM queries
     */ }, { key: "handleDOM", value:
    function handleDOM() {
      this.burgerMenu = jQuery('.burger-menu');
      this.overlay = jQuery('.overlay');
      this.body = jQuery('body');
      this.closeCampaignModal = jQuery('.close-modal');
      this.campaignModal = jQuery('.campaign-overlay');
    }

    /**
     * Listen for events
     */ }, { key: "handleEvents", value:
    function handleEvents() {
      var self = this;

      this.burgerMenu.on('click', function () {
        self.body.toggleClass('open-menu');
        self.overlay.toggleClass('show');
      });

      this.closeCampaignModal.on('click', function () {
        self.closeCampaignModal.closest(self.campaignModal).modal("hide");
      });
    } }]);return LayoutHandler;}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGF5b3V0SGFuZGxlci5qcyIsIm5hbWVzIjpbIkxheW91dEhhbmRsZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbml0IiwiaGFuZGxlRE9NIiwiaGFuZGxlRXZlbnRzIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJidXJnZXJNZW51IiwialF1ZXJ5Iiwib3ZlcmxheSIsImJvZHkiLCJjbG9zZUNhbXBhaWduTW9kYWwiLCJjYW1wYWlnbk1vZGFsIiwic2VsZiIsIm9uIiwidG9nZ2xlQ2xhc3MiLCJjbG9zZXN0IiwibW9kYWwiXSwic291cmNlcyI6WyJMYXlvdXRIYW5kbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIExheW91dEhhbmRsZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgdGhpcy5oYW5kbGVET00oKTtcclxuICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWNsYXJlIGdsb2JhbCB2YXJpYWJsZXNcclxuICAgKi9cclxuICBpbml0KCkge1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIERPTSBxdWVyaWVzXHJcbiAgICovXHJcbiAgaGFuZGxlRE9NKCkge1xyXG4gICAgdGhpcy5idXJnZXJNZW51ID0galF1ZXJ5KCcuYnVyZ2VyLW1lbnUnKTtcclxuICAgIHRoaXMub3ZlcmxheSA9IGpRdWVyeSgnLm92ZXJsYXknKTtcclxuICAgIHRoaXMuYm9keSA9IGpRdWVyeSgnYm9keScpO1xyXG4gICAgdGhpcy5jbG9zZUNhbXBhaWduTW9kYWwgPSBqUXVlcnkoJy5jbG9zZS1tb2RhbCcpO1xyXG4gICAgdGhpcy5jYW1wYWlnbk1vZGFsID0galF1ZXJ5KCcuY2FtcGFpZ24tb3ZlcmxheScpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTGlzdGVuIGZvciBldmVudHNcclxuICAgKi9cclxuICBoYW5kbGVFdmVudHMoKSB7XHJcbiAgICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5idXJnZXJNZW51Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgc2VsZi5ib2R5LnRvZ2dsZUNsYXNzKCdvcGVuLW1lbnUnKTtcclxuICAgICAgc2VsZi5vdmVybGF5LnRvZ2dsZUNsYXNzKCdzaG93Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNsb3NlQ2FtcGFpZ25Nb2RhbC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHNlbGYuY2xvc2VDYW1wYWlnbk1vZGFsLmNsb3Nlc3Qoc2VsZi5jYW1wYWlnbk1vZGFsKS5tb2RhbChcImhpZGVcIik7XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiIwakRBQU1BLGFBQWE7O0VBRWpCLFNBQUFBLGNBQUEsRUFBYyxDQUFBQyxlQUFBLE9BQUFELGFBQUE7SUFDWixJQUFJLENBQUNFLElBQUksQ0FBQyxDQUFDO0lBQ1gsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUNoQixJQUFJLENBQUNDLFlBQVksQ0FBQyxDQUFDO0VBQ3JCOztFQUVBO0FBQ0Y7QUFDQSxLQUZFQyxZQUFBLENBQUFMLGFBQUEsS0FBQU0sR0FBQSxVQUFBQyxLQUFBO0lBR0EsU0FBQUwsS0FBQSxFQUFPO0lBQ1A7O0lBRUE7QUFDRjtBQUNBLE9BRkUsTUFBQUksR0FBQSxlQUFBQyxLQUFBO0lBR0EsU0FBQUosVUFBQSxFQUFZO01BQ1YsSUFBSSxDQUFDSyxVQUFVLEdBQUdDLE1BQU0sQ0FBQyxjQUFjLENBQUM7TUFDeEMsSUFBSSxDQUFDQyxPQUFPLEdBQUdELE1BQU0sQ0FBQyxVQUFVLENBQUM7TUFDakMsSUFBSSxDQUFDRSxJQUFJLEdBQUdGLE1BQU0sQ0FBQyxNQUFNLENBQUM7TUFDMUIsSUFBSSxDQUFDRyxrQkFBa0IsR0FBR0gsTUFBTSxDQUFDLGNBQWMsQ0FBQztNQUNoRCxJQUFJLENBQUNJLGFBQWEsR0FBR0osTUFBTSxDQUFDLG1CQUFtQixDQUFDO0lBQ2xEOztJQUVBO0FBQ0Y7QUFDQSxPQUZFLE1BQUFILEdBQUEsa0JBQUFDLEtBQUE7SUFHQSxTQUFBSCxhQUFBLEVBQWU7TUFDYixJQUFJVSxJQUFJLEdBQUcsSUFBSTs7TUFFZixJQUFJLENBQUNOLFVBQVUsQ0FBQ08sRUFBRSxDQUFDLE9BQU8sRUFBRSxZQUFZO1FBQ3RDRCxJQUFJLENBQUNILElBQUksQ0FBQ0ssV0FBVyxDQUFDLFdBQVcsQ0FBQztRQUNsQ0YsSUFBSSxDQUFDSixPQUFPLENBQUNNLFdBQVcsQ0FBQyxNQUFNLENBQUM7TUFDbEMsQ0FBQyxDQUFDOztNQUVGLElBQUksQ0FBQ0osa0JBQWtCLENBQUNHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBWTtRQUM5Q0QsSUFBSSxDQUFDRixrQkFBa0IsQ0FBQ0ssT0FBTyxDQUFDSCxJQUFJLENBQUNELGFBQWEsQ0FBQyxDQUFDSyxLQUFLLENBQUMsTUFBTSxDQUFDO01BQ25FLENBQUMsQ0FBQztJQUNKLENBQUMsWUFBQWxCLGFBQUEifQ==

"use strict"; // init handlers
var layoutHandler = null;
var formHandler = null;

var initHandlers = function initHandlers() {
  layoutHandler = new LayoutHandler();
  formHandler = new FormHandler();
};

// uncomment this to use jQuery
(function ($) {
  $(document).ready(function () {
    initHandlers();
  });
})(jQuery);


// init handlers using vanilla
// document.addEventListener('DOMContentLoaded', () => { initHandlers(); });
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm5hbWVzIjpbImxheW91dEhhbmRsZXIiLCJmb3JtSGFuZGxlciIsImluaXRIYW5kbGVycyIsIkxheW91dEhhbmRsZXIiLCJGb3JtSGFuZGxlciIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwialF1ZXJ5Il0sInNvdXJjZXMiOlsibWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbml0IGhhbmRsZXJzXHJcbmxldCBsYXlvdXRIYW5kbGVyID0gbnVsbDtcclxubGV0IGZvcm1IYW5kbGVyID0gbnVsbDtcclxuXHJcbmNvbnN0IGluaXRIYW5kbGVycyA9ICgpID0+IHtcclxuICBsYXlvdXRIYW5kbGVyID0gbmV3IExheW91dEhhbmRsZXIoKTtcclxuICBmb3JtSGFuZGxlciA9IG5ldyBGb3JtSGFuZGxlcigpO1xyXG59O1xyXG5cclxuLy8gdW5jb21tZW50IHRoaXMgdG8gdXNlIGpRdWVyeVxyXG4oKCQpID0+IHtcclxuICAkKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XHJcbiAgICBpbml0SGFuZGxlcnMoKTtcclxuICB9KTtcclxufSkoalF1ZXJ5KTtcclxuXHJcblxyXG4vLyBpbml0IGhhbmRsZXJzIHVzaW5nIHZhbmlsbGFcclxuLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsgaW5pdEhhbmRsZXJzKCk7IH0pO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiY0FBQTtBQUNBLElBQUlBLGFBQWEsR0FBRyxJQUFJO0FBQ3hCLElBQUlDLFdBQVcsR0FBRyxJQUFJOztBQUV0QixJQUFNQyxZQUFZLEdBQUcsU0FBZkEsWUFBWUEsQ0FBQSxFQUFTO0VBQ3pCRixhQUFhLEdBQUcsSUFBSUcsYUFBYSxDQUFDLENBQUM7RUFDbkNGLFdBQVcsR0FBRyxJQUFJRyxXQUFXLENBQUMsQ0FBQztBQUNqQyxDQUFDOztBQUVEO0FBQ0EsQ0FBQyxVQUFDQyxDQUFDLEVBQUs7RUFDTkEsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLFlBQU07SUFDdEJMLFlBQVksQ0FBQyxDQUFDO0VBQ2hCLENBQUMsQ0FBQztBQUNKLENBQUMsRUFBRU0sTUFBTSxDQUFDOzs7QUFHVjtBQUNBIn0=

//# sourceMappingURL=main.min.js.map
